version: '2'
.catalog:
  name: "SYS-OPS"
  version: "0.3"
  description: "System OPS"
  uuid: sys-ops
services:
  alexandria:
    hostname: alexandria.lab.santech.fr
  LB:
    scale: 1
    start_on_create: true
    lb_config:
      certs: []
      default_cert: foreman.lab
      port_rules:
        - hostname: myp-wordpress-dev.lab.santech.fr
          priority: 10
          protocol: http
          service: myp/wordpress
          source_port: 80
          target_port: 80
        - hostname: foreman.lab
          path: ''
          priority: 5
          protocol: http
          service: foreman
          source_port: 80
          target_port: 80
        - hostname: zabbix.lab
          path: ''
          priority: 6
          protocol: http
          service: zabbix-server
          source_port: 80
          target_port: 80
        - hostname: yum-repo.lab
          priority: 11
          protocol: http
          service: yum-repo
          source_port: 80
          target_port: 80
      health_check:
        healthy_threshold: 2
        response_timeout: 2000
        port: 42
        unhealthy_threshold: 3
        initializing_timeout: 60000
        interval: 2000
        reinitializing_timeout: 60000
  janitor:
    start_on_create: true
  elk-slave:
    scale: 1
    start_on_create: true
    health_check:
      response_timeout: 2000
      healthy_threshold: 2
      port: 9200
      unhealthy_threshold: 3
      initializing_timeout: 30000
      interval: 2000
      strategy: recreate
      request_line: GET "/_cat/health?h=status" "HTTP/1.1"
      reinitializing_timeout: 30000
  foreman:
    scale: 1
    start_on_create: true
  zabbix-server:
    scale: 1
    start_on_create: true
  zabbix-agent:
    start_on_create: true
    health_check:
      response_timeout: 2000
      healthy_threshold: 2
      port: 10050
      unhealthy_threshold: 3
      initializing_timeout: 30000
      interval: 2000
      strategy: recreate
      reinitializing_timeout: 30000
  yum-repo:
    scale: 1
    start_on_create: true
